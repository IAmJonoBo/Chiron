# Offline Installation Guide

This guide provides instructions for installing Chiron and its dependencies in air-gapped or offline environments.

## Prerequisites

- Python 3.8 or higher installed on the target system
- Airgap bundle (`chiron-airgap-*.tar.gz`) transferred to the offline environment

## Installation Steps

### 1. Extract the Airgap Bundle

```bash
tar -xzf chiron-airgap-YYYYMMDD-HHMMSS.tar.gz
cd chiron-airgap-YYYYMMDD-HHMMSS
```

### 2. Install from Wheelhouse

Install Chiron and all dependencies from the included wheelhouse:

```bash
pip install --no-index --find-links=wheelhouse chiron
```

Or install specific packages:

```bash
pip install --no-index --find-links=wheelhouse -r requirements.txt
```

### 3. Verify Installation

Verify that Chiron is installed correctly:

```bash
python -c "import chiron; print(chiron.__version__)"
```

## Using the FastAPI Adapter

Start the Chiron API server:

```bash
python -m chiron.api
```

Or using uvicorn directly:

```bash
uvicorn chiron.api:app --host 0.0.0.0 --port 8000
```

The API will be available at `http://localhost:8000`. Visit `http://localhost:8000/docs` for interactive API documentation.

## Creating Your Own Airgap Bundle

On a connected system, create a custom airgap bundle:

```bash
# Using make
make airgap

# Or manually
mkdir wheelhouse
pip download -d wheelhouse chiron
pip download -d wheelhouse <additional-packages>
tar -czf chiron-airgap-custom.tar.gz wheelhouse/ requirements.txt
```

## Troubleshooting

### Missing Dependencies

If you encounter missing dependencies:

1. On a connected system, download the missing package:
   ```bash
   pip download -d wheelhouse <package-name>
   ```

2. Transfer the wheel file to your offline environment

3. Install with:
   ```bash
   pip install --no-index --find-links=wheelhouse <package-name>
   ```

### Version Conflicts

If you have version conflicts:

1. Check installed versions:
   ```bash
   pip list
   ```

2. Uninstall conflicting packages:
   ```bash
   pip uninstall <package-name>
   ```

3. Reinstall from wheelhouse:
   ```bash
   pip install --no-index --find-links=wheelhouse <package-name>
   ```

## Security Considerations

- Always verify checksums of airgap bundles before installation:
  ```bash
  sha256sum -c SHA256SUMS
  ```

- Review the SBOM (Software Bill of Materials) included in release artifacts

- Check vulnerability reports generated by Grype before deploying

## Support

For issues or questions, please refer to the main README.md or open an issue on GitHub (from a connected system).
